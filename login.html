<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login | Student Room Finder</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="css/login.css">

</head>
<body>

<header class="navbar">
  <div class="logo">üè† Student Room Finder</div>
</header>

<section class="form-section glass">
  <h2>Welcome Back</h2>
  <p>Login to continue your journey</p>

  <form id="loginForm" class="form">
    <div class="role-selection">
      <label><strong>Select Role:</strong></label>
      <div class="radio-group">
        <label class="radio-option">
          <input type="radio" name="role" value="user" checked>
          <span>1. User</span>
        </label>
        <label class="radio-option">
          <input type="radio" name="role" value="agent">
          <span>2. Agent</span>
        </label>
        <label class="radio-option">
          <input type="radio" name="role" value="employee">
          <span>3. Employee</span>
        </label>
      </div>
    </div>
    <input type="email" placeholder="Email Address" required>
    <input type="password" placeholder="Password" required>
    <button type="submit" class="btn-primary">Login</button>
  </form>

  <p class="login-link" style="margin-top:15px;">
    New user? <a href="register.html" style="color:#ffcc00; font-weight:600;">Register here</a>
  </p>
</section>

<script>
document.getElementById('loginForm').addEventListener('submit', function(e){
    e.preventDefault();
    const role = e.target.querySelector('input[name="role"]:checked').value;
    const email = e.target.querySelector('input[type="email"]').value;
    const password = e.target.querySelector('input[type="password"]').value;

    if(!role || !email || !password){
        alert("Please fill in all fields!");
        return;
    }

    const users = JSON.parse(localStorage.getItem('users')) || [];
    const user = users.find(u => u.email === email && u.password === password && u.role === role);

    if(user){
        alert(`Login successful as ${role}!`);
        localStorage.setItem('loggedInUser', JSON.stringify(user));
        
        // Redirect based on role
        if(role === 'agent'){
            window.location.href = "agent-dashboard.html";
        } else if(role === 'employee'){
            window.location.href = "employee-dashboard.html";
        } else {
            window.location.href = "index.html";
        }
    } else {
        alert("Invalid email, password, or role!");
    }
});
</script>

</body>
</html>
