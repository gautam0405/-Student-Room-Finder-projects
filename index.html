<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Room Finder</title>
    <link rel="stylesheet" href="style.css">
</head>

<body> <!-- Navigation Bar -->
    <header class="navbar">
        <div class="logo">üè† Student Room Finder</div>
        <nav>
            <ul>
                <li><a href="#home">Home</a></li>
                <li id="postRoomNav"><a onclick="checkLogin(event, 'post-room.html')">Post Room</a></li>
                <li id="searchNav"><a onclick="checkLogin(event, '#search')">Search</a></li>
                <li><a href="map.html">üó∫Ô∏è Map</a></li>
                <li><a href="#contact">Contact</a></li>
                <li id="loginNav"><a href="login.html" class="login-btn">Login</a></li>
                <li id="userInfoNav" style="display:none;"><span id="userNameSpan"></span></li>
                <li id="logoutNav" style="display:none;"><a onclick="logout()" class="logout-btn">Logout</a></li>
            </ul>
        </nav>
    </header> <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-content">
            <h1>Find Verified Rooms Near Your College</h1>
            <p>Smart, secure, and student-friendly platform for room sharing and searching.</p> 
            <button class="btn-primary" onclick="document.getElementById('search').scrollIntoView()">Explore Now</button>
        </div>
    </section> <!-- Search Room Section -->
    <section id="search" class="form-section glass">
        <h2>Search Rooms</h2>
        <div id="loginRequiredMessage" style="display:none; text-align: center; padding: 30px; background: rgba(255, 107, 107, 0.2); border-radius: 10px; color: white; margin-bottom: 20px;">
            <p style="font-size: 1.1rem; margin: 0;">üîí Please <a href="login.html" style="color: #ffcc00; text-decoration: none; font-weight: 600;">Login</a> to search rooms</p>
        </div>
        <form id="searchForm" style="display:none;"> <input type="text" placeholder="Enter Location" required> <input type="number"
                placeholder="Max Rent (‚Çπ)"> <select>
                <option value="">Room Type</option>
                <option value="single">Single</option>
                <option value="double">Double</option>
                <option value="1bhk">1 BHK</option>
                <option value="2bhk">2 BHK</option>
                <option value="3bhk">3 BHK</option>
            </select> <button type="submit" class="btn-primary">Search</button> </form>
        <div id="searchResults" class="results"></div>
    </section> <!-- Contact Section -->
    <section id="contact" class="contact-section">
        <h2>Contact Us</h2>
        <p>Email: support@studentroomfinder.com</p>
        <p>Phone: +91 98765 43210</p>
    </section> <!-- Footer -->
    <footer>
        <p>¬© 2026 Student Room Finder | Designed for Students</p>
    </footer>
    <script src="app.js"></script>
    <script src="chatbot.js"></script>
    <script>
        // Check login status on page load
        function updateNavbar() {
            const user = JSON.parse(localStorage.getItem('loggedInUser'));
            const loginNav = document.getElementById('loginNav');
            const userInfoNav = document.getElementById('userInfoNav');
            const logoutNav = document.getElementById('logoutNav');
            const searchForm = document.getElementById('searchForm');
            const loginMessage = document.getElementById('loginRequiredMessage');

            if (user) {
                // User is logged in
                loginNav.style.display = 'none';
                userInfoNav.style.display = 'block';
                logoutNav.style.display = 'block';
                document.getElementById('userNameSpan').textContent = 'üë§ ' + (user.name || user.email);
                searchForm.style.display = 'flex';
                loginMessage.style.display = 'none';
            } else {
                // User is not logged in
                loginNav.style.display = 'block';
                userInfoNav.style.display = 'none';
                logoutNav.style.display = 'none';
                searchForm.style.display = 'none';
                loginMessage.style.display = 'block';
            }
        }

        function checkLogin(e, target) {
            e.preventDefault();
            const user = JSON.parse(localStorage.getItem('loggedInUser'));
            if (!user) {
                alert('Please login to access this feature!');
                window.location.href = 'login.html';
            } else {
                if (target.startsWith('#')) {
                    document.querySelector(target).scrollIntoView();
                } else {
                    window.location.href = target;
                }
            }
        }

        function logout() {
            localStorage.removeItem('loggedInUser');
            updateNavbar();
            window.location.href = '#home';
        }

        // Update navbar on page load
        window.addEventListener('load', updateNavbar);
        
        // Also check for storage changes (when logging in from another tab)
        window.addEventListener('storage', updateNavbar);
    </script>
</body>

</html>